<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">
	<ui:define name="title">Test Page</ui:define>
	<ui:define name="viewname">Test Page</ui:define>
	<ui:define name="content">
		<div class="card">
			<p:growl id="msgs" showDetail="true" skipDetailIfEqualsSummary="true" />
			<h:form id="dashboardForm">
				<p:panelGrid styleClass="foo">
					<p:row>
						<p:column>
							<p:panel id="book" header="Book" styleClass="foo">
								<p:tabView>
									<p:tab title="Product">
										<p:donutChart styleClass="foo"
											model="#{bookView.productDonutModel}" />
									</p:tab>
									<p:tab title="Cash">
										<p:donutChart model="#{bookView.cashDonutModel}" />
									</p:tab>
								</p:tabView>
							</p:panel>
						</p:column>
						<p:column>
							<p:panel>
								<p:tabView>
									<p:tab id="tradeBooking" title="Trade Booking">
										<p:messages showDetail="true" closable="true" id="tradeMsg"
											for="tradeMsg" />
										<p:panelGrid styleClass="nested">
											<p:row>
												<p:column>
													<p:outputLabel value="Trade Id" class="label" />
												</p:column>
												<p:column>
													<p:outputLabel value="#{gCRepoTradeView.id}" />
												</p:column>
											</p:row>
											<p:row>
												<p:column>
													<p:outputLabel value="Status" class="label" />
												</p:column>
												<p:column>
													<p:outputLabel value="#{gCRepoTradeView.status}" />
												</p:column>
												<p:column>
													<p:outputLabel value="Trade Date" class="label" />
												</p:column>
												<p:column>
													<p:datePicker value="#{gCRepoTradeView.tradeDate}" id="d"
														pattern="dd/MM/yyyy" styleClass="TradistaInput" />
												</p:column>
												<p:column>
													<p:outputLabel value="Right of substitution" class="label" />
												</p:column>
												<p:column>
													<p:selectBooleanCheckbox
														value="#{gCRepoTradeView.rightOfSubstitution}"></p:selectBooleanCheckbox>
												</p:column>
											</p:row>
											<p:row>
												<p:column>
													<p:outputLabel value="Counterparty" class="label" />
												</p:column>
												<p:column>
													<p:selectOneMenu value="#{gCRepoTradeView.counterparty}"
														converter="#{gCRepoTradeView.legalEntityConverter}"
														styleClass="TradistaOneMenu">
														<f:selectItems
															value="#{gCRepoTradeView.allCounterparties}" />
													</p:selectOneMenu>
												</p:column>
												<p:column>
													<p:outputLabel value="Fixed/Floating Rate" class="label" />
												</p:column>
												<p:column>
													<p:selectOneMenu value="#{gCRepoTradeView.interestType}"
														styleClass="TradistaOneMenu">
														<f:selectItems value="#{gCRepoTradeView.allInterestTypes}" />
														<p:ajax event="change"
															update="repoRate indexName indexTenor indexOffset" />
														<p:ajax event="change"
															listener="#{gCRepoTradeView.updateIndex()}" />
														<p:ajax event="change"
															listener="#{gCRepoTradeView.updateQuoteNames()}" />
														<p:ajax event="change"
															update=":dashboardForm:quotesCashflowsTabs:quotesListDataTable"
															listener="#{quotesView.refresh(quotesView.quoteDate, quotesView.quoteSet, gCRepoTradeView.quoteNames)}" />
													</p:selectOneMenu>
												</p:column>
												<p:column>
													<p:outputLabel value="Right of reuse" class="label" />
												</p:column>
												<p:column>
													<p:selectBooleanCheckbox
														value="#{gCRepoTradeView.rightOfReuse}"></p:selectBooleanCheckbox>
												</p:column>
											</p:row>
											<p:row>
												<p:column>
													<p:outputLabel value="Direction" class="label" />
												</p:column>
												<p:column>
													<p:selectOneMenu id="b"
														value="#{gCRepoTradeView.direction}"
														converter="#{gCRepoTradeView.directionConverter}"
														styleClass="TradistaOneMenu">
														<f:selectItems value="#{gCRepoTradeView.allDirections}" />
													</p:selectOneMenu>
												</p:column>
												<p:column>
													<p:outputLabel value="Repo Rate" class="label" />
												</p:column>
												<p:column>
													<p:inputNumber id="repoRate"
														value="#{gCRepoTradeView.repoRate}"
														disabled="#{gCRepoTradeView.interestType eq 'Floating'}"
														styleClass="TradistaInput" />
												</p:column>
												<p:column>
													<p:outputLabel value="Cross currency collateral"
														class="label" />
												</p:column>
												<p:column>
													<p:selectBooleanCheckbox
														value="#{gCRepoTradeView.crossCurrencyCollateral}"></p:selectBooleanCheckbox>
												</p:column>
											</p:row>
											<p:row>
												<p:column>
													<p:outputLabel value="Book" class="label" />
												</p:column>
												<p:column>
													<p:selectOneMenu value="#{gCRepoTradeView.book}"
														converter="#{gCRepoTradeView.bookConverter}"
														styleClass="TradistaOneMenu">
														<p:ajax event="change"
															listener="#{bookView.refresh(gCRepoTradeView.book)}"
															update=":dashboardForm:book" />
														<f:selectItems value="#{gCRepoTradeView.allBooks}" />
													</p:selectOneMenu>
												</p:column>
												<p:column>
													<p:outputLabel value="Index Name" class="label" />
												</p:column>
												<p:column>
													<p:selectOneMenu id="indexName"
														value="#{gCRepoTradeView.index}"
														converter="#{gCRepoTradeView.indexConverter}"
														styleClass="TradistaOneMenu"
														disabled="#{gCRepoTradeView.interestType eq 'Fixed' or empty gCRepoTradeView.interestType}">
														<f:selectItems value="#{gCRepoTradeView.allIndexes}" />
														<p:ajax event="change"
															listener="#{gCRepoTradeView.updateQuoteNames()}" />
														<p:ajax event="change"
															update=":dashboardForm:quotesCashflowsTabs:quotesListDataTable"
															listener="#{quotesView.refresh(quotesView.quoteDate, quotesView.quoteSet, gCRepoTradeView.quoteNames)}" />
													</p:selectOneMenu>
												</p:column>
												<p:column>
													<p:outputLabel value="Terminable on demand" class="label" />
												</p:column>
												<p:column>
													<p:selectBooleanCheckbox
														value="#{gCRepoTradeView.terminableOnDemand}">
														<p:ajax update="noticePeriod" />
													</p:selectBooleanCheckbox>
												</p:column>
											</p:row>
											<p:row>
												<p:column>
													<p:outputLabel value="Cash amount" class="label" />
												</p:column>
												<p:column>
													<p:inputNumber value="#{gCRepoTradeView.amount}"
														decimalPlaces="0" styleClass="TradistaInput" />
												</p:column>
												<p:column>
													<p:outputLabel value="Index Tenor" class="label" />
												</p:column>
												<p:column>
													<p:selectOneMenu value="#{gCRepoTradeView.indexTenor}"
														id="indexTenor" styleClass="TradistaOneMenu"
														disabled="#{gCRepoTradeView.interestType eq 'Fixed' or empty gCRepoTradeView.interestType}">
														<f:selectItems value="#{gCRepoTradeView.allIndexTenors}" />
														<p:ajax event="change"
															listener="#{gCRepoTradeView.updateQuoteNames()}" />
														<p:ajax event="change"
															update=":dashboardForm:quotesCashflowsTabs:quotesListDataTable"
															listener="#{quotesView.refresh(quotesView.quoteDate, quotesView.quoteSet, gCRepoTradeView.quoteNames)}" />
													</p:selectOneMenu>
												</p:column>
												<p:column>
													<p:outputLabel
														value="Notice Period (expressed in business days)"
														class="label" />
												</p:column>
												<p:column>
													<p:inputNumber value="#{gCRepoTradeView.noticePeriod}"
														id="noticePeriod" decimalPlaces="0"
														styleClass="TradistaInput"
														disabled="#{gCRepoTradeView.terminableOnDemand eq false or empty gCRepoTradeView.terminableOnDemand}" />
												</p:column>
											</p:row>
											<p:row>
												<p:column>
													<p:outputLabel value="Currency" class="label" />
												</p:column>
												<p:column>
													<p:selectOneMenu value="#{gCRepoTradeView.currency}"
														converter="#{gCRepoTradeView.currencyConverter}"
														styleClass="TradistaOneMenu">
														<f:selectItems value="#{gCRepoTradeView.allCurrencies}" />
														<p:ajax
															update=":dashboardForm:quotesCashflowsTabs:cashflowsListDataTable"
															listener="#{cashflowsView.updateDiscountCurve(pricingView.pricingParameter, gCRepoTradeView.currency)}" />
													</p:selectOneMenu>
												</p:column>
												<p:column>
													<p:outputLabel value="Index Offset" class="label" />
												</p:column>
												<p:column>
													<p:inputNumber value="#{gCRepoTradeView.indexOffset}"
														id="indexOffset" styleClass="TradistaInput"
														disabled="#{gCRepoTradeView.interestType eq 'Fixed' or empty gCRepoTradeView.interestType}" />
												</p:column>
												<p:column>
													<p:outputLabel value="Start Date" class="label" />
												</p:column>
												<p:column>
													<p:datePicker value="#{gCRepoTradeView.startDate}"
														pattern="dd/MM/yyyy" styleClass="TradistaInput" />
												</p:column>
											</p:row>
											<p:row>
												<p:column value="Basket">
													<p:outputLabel value="GC Basket" class="label" />
												</p:column>
												<p:column>
													<p:selectOneMenu value="#{gCRepoTradeView.basket}"
														styleClass="TradistaOneMenu">
														<f:selectItems value="#{gCRepoTradeView.allBaskets}" />
														<f:converter converterId="gcBasketConverter" />
													</p:selectOneMenu>
												</p:column>
												<p:column>
													<p:outputLabel value="Margin Rate" class="label" />
												</p:column>
												<p:column>
													<p:inputNumber value="#{gCRepoTradeView.marginRate}"
														styleClass="TradistaInput" />
												</p:column>
												<p:column>
													<p:outputLabel value="End Date" class="label" />
												</p:column>
												<p:column>
													<p:datePicker value="#{gCRepoTradeView.endDate}"
														pattern="dd/MM/yyyy" styleClass="TradistaInput" />
												</p:column>
											</p:row>
											<f:facet name="footer">
												<p:row>
													<p:column colspan="8">
														<p:outputLabel value="Apply action" />
														<p:selectOneMenu value="#{gCRepoTradeView.action}"
															styleClass="TradistaOneMenu" style="margin-left:10px">
															<f:selectItems
																value="#{gCRepoTradeView.allAvailableActions}" />
														</p:selectOneMenu>
														<p:commandButton value="Save" style="margin-left:10px"
															styleClass="rounded-button" update="@form">
															<f:actionListener
																binding="#{gCRepoTradeView.refreshCollateral(collateralView.getAddedSecurities())}" />
															<f:actionListener binding="#{gCRepoTradeView.save()}" />
															<f:actionListener binding="#{bookView.loadBook()}" />
															<f:actionListener
																binding="#{collateralView.refresh(gCRepoTradeView.id)}" />
														</p:commandButton>
														<p:commandButton value="Copy" style="margin-left:10px"
															styleClass="rounded-button" update="@form">
															<f:actionListener binding="#{gCRepoTradeView.copy()}" />
															<f:actionListener binding="#{bookView.loadBook()}" />
															<f:actionListener
																binding="#{collateralView.refresh(gCRepoTradeView.id)}" />
														</p:commandButton>
														<p:commandButton value="New" style="margin-left:10px"
															styleClass="rounded-button"
															action="#{gCRepoTradeView.clear}" update="@form">
															<f:actionListener binding="#{collateralView.clear()}" />
														</p:commandButton>
														<p:outputLabel value="Load by Id" style="margin-left:10px" />
														<p:inputText value="#{gCRepoTradeView.idToBeLoaded}"
															style="margin-left:10px" styleClass="TradistaInput" />
														<p:commandButton value="Load" style="margin-left:10px"
															styleClass="rounded-button"
															action="#{gCRepoTradeView.load}" update="@form">
															<f:actionListener
																binding="#{collateralView.refresh(gCRepoTradeView.idToBeLoaded)}" />
														</p:commandButton>
													</p:column>
												</p:row>
											</f:facet>
										</p:panelGrid>
									</p:tab>
									<p:tab title="Collateral">
										<p:messages showDetail="true" closable="true" id="colMsg"
											for="colMsg" />
										<div class="card">
											<div class="flex">

												<p:panelGrid styleClass="nested">
													<p:row>
														<p:column>
															<p:outputLabel value="#{collateralView.context}"
																style="font-weight:bold;" />
															<br />
															<br />
															<p:outputLabel value="Collateral" class="label" />
															<p:dataTable id="collateralDataTable" var="coll"
																value="#{collateralView.collateralValues}"
																allowUnsorting="true" sortMode="single"
																tableStyle="table-layout: auto;" size="small">
																<p:column headerText="ISIN" sortBy="#{coll.security}">
																	<p:outputLabel value="#{coll.security}" />
																</p:column>
																<p:column headerText="Quantity"
																	sortBy="#{coll.quantity}">
																	<p:outputLabel value="#{coll.quantity}">
																		<f:convertNumber pattern="#0.00" />
																	</p:outputLabel>
																</p:column>
															</p:dataTable>
														</p:column>
													</p:row>
													<p:row rendered="#{not (collateralView.context eq null)}">
														<p:column>
															<p:outputLabel value="Available Collateral :"
																class="label" />
															<p:dataTable id="availableCollateralDataTable" var="coll"
																value="#{collateralView.availableCollateralValues}"
																allowUnsorting="true" sortMode="single"
																tableStyle="table-layout: auto;" size="small">
																<p:column headerText="ISIN" sortBy="#{coll.security}">
																	<p:outputLabel value="#{coll.security}" />
																</p:column>
																<p:column headerText="Quantity"
																	sortBy="#{coll.quantity}">
																	<p:outputLabel value="#{coll.quantity}">
																		<f:convertNumber pattern="#0.00" />
																	</p:outputLabel>
																</p:column>
																<p:column headerText="Book" sortBy="#{coll.book}">
																	<p:outputLabel value="#{coll.book}" />
																</p:column>
																<p:column>
																	<p:commandButton style="margin-left:10px"
																		styleClass="rounded-button" icon="pi pi-plus"
																		oncomplete="PF('addCol').show();"
																		update=":dashboardForm:addCol"
																		action="#{collateralView.setCollateralToAdd(coll.security, coll.exchange, coll.book, coll.quantity)}" />
																</p:column>
															</p:dataTable>
														</p:column>
													</p:row>
													<p:row rendered="#{not (collateralView.context eq null)}">
														<p:column>
															<p:outputLabel value="Added :" class="label" />
															<p:dataTable id="addedCollateralDataTable" var="coll"
																value="#{collateralView.addedCollateralValues}"
																allowUnsorting="true" sortMode="single"
																tableStyle="table-layout: auto;" size="small">
																<p:column headerText="ISIN" sortBy="#{coll.security}">
																	<p:outputLabel value="#{coll.security}" />
																</p:column>
																<p:column headerText="Quantity"
																	sortBy="#{coll.quantity}">
																	<p:outputLabel value="#{coll.quantity}">
																		<f:convertNumber pattern="#0.00" />
																	</p:outputLabel>
																</p:column>
																<p:column headerText="From Book" sortBy="#{coll.book}">
																	<p:outputLabel value="#{coll.book}" />
																</p:column>
																<p:column>
																	<p:commandButton style="margin-left:10px"
																		styleClass="rounded-button" icon="pi pi-minus"
																		action="#{collateralView.removeCollateral(coll.security, coll.exchange, coll.book, coll.quantity)}"
																		update="@form">
																	</p:commandButton>
																</p:column>
															</p:dataTable>
														</p:column>
													</p:row>
												</p:panelGrid>
												<p:divider layout="vertical" />
												<p:outputLabel>Gauge</p:outputLabel>
												<p:donutChart
													model="#{collateralView.collateralMarketValueDonutModel}" />
											</div>
										</div>
									</p:tab>
								</p:tabView>
							</p:panel>
						</p:column>
					</p:row>
					<p:row>
						<p:column>
							<p:panel id="pricing" header="Pricing">
								<p:panelGrid id="pricingGrid" styleClass="nested">
									<p:row>
										<p:column>
											<p:outputLabel value="Pricer" class="label" />
										</p:column>
										<p:column>
											<p:outputLabel id="pricer" value="#{pricingView.pricer}">
												<f:converter converterId="pricerConverter" />
											</p:outputLabel>
										</p:column>
									</p:row>
									<p:row>
										<p:column>
											<p:outputLabel value="Pricer QuoteSet" class="label" />
										</p:column>
										<p:column>
											<p:selectOneMenu value="#{pricingView.quoteSet}"
												styleClass="TradistaOneMenu">
												<f:selectItems value="#{pricingView.allQuoteSets}" />
												<f:converter converterId="quoteSetConverter" />
											</p:selectOneMenu>
										</p:column>
									</p:row>
									<p:row>
										<p:column>
											<p:outputLabel value="Pricing Parameter" class="label" />
										</p:column>
										<p:column>
											<p:selectOneMenu value="#{pricingView.pricingParameter}"
												styleClass="TradistaOneMenu"
												converter="#{pricingView.pricingParameterConverter}">
												<f:selectItems value="#{pricingView.allPricingParameters}" />
												<p:ajax update="pricer"
													listener="#{pricingView.updatePricer}" />
												<p:ajax update="pricingMeasure"
													listener="#{pricingView.updatePricingMeasures}" />
												<p:ajax
													update=":dashboardForm:quotesCashflowsTabs:cashflowsListDataTable"
													listener="#{cashflowsView.updateDiscountCurve(pricingView.pricingParameter, gCRepoTradeView.currency)}" />
											</p:selectOneMenu>
										</p:column>
									</p:row>
									<p:row>
										<p:column>
											<p:outputLabel value="Pricing Measure" class="label" />
										</p:column>
										<p:column>
											<p:selectOneMenu id="pricingMeasure"
												value="#{pricingView.pricerMeasure}"
												styleClass="TradistaOneMenu">
												<f:selectItems value="#{pricingView.allPricerMeasures}" />
												<f:converter converterId="pricerMeasureConverter" />
												<f:attribute name="pricer" value="#{pricingView.pricer}" />
												<p:ajax update="pricingMethod"
													listener="#{pricingView.updatePricingMethods}" />
											</p:selectOneMenu>
										</p:column>
									</p:row>
									<p:row>
										<p:column>
											<p:outputLabel value="Pricing Method" class="label" />
										</p:column>
										<p:column>
											<p:selectOneMenu id="pricingMethod"
												value="#{pricingView.pricingMethod}"
												styleClass="TradistaOneMenu">
												<f:selectItems value="#{pricingView.allPricingMethods}" />
											</p:selectOneMenu>
										</p:column>
									</p:row>
									<p:row>
										<p:column>
											<p:outputLabel value="Pricing Currency" class="label" />
										</p:column>
										<p:column>
											<p:selectOneMenu value="#{pricingView.pricingCurrency}"
												styleClass="TradistaOneMenu">
												<f:selectItems value="#{pricingView.allCurrencies}" />
												<f:converter converterId="currencyConverter" />
											</p:selectOneMenu>
										</p:column>
									</p:row>
									<p:row>
										<p:column>
											<p:outputLabel value="Pricing Date" class="label" />
										</p:column>
										<p:column>
											<p:datePicker value="#{pricingView.pricingDate}"
												pattern="dd/MM/yyyy" styleClass="TradistaInput">
												<p:ajax
													update=":dashboardForm:quotesCashflowsTabs:cashflowsListDataTable" />
											</p:datePicker>
										</p:column>
									</p:row>
									<f:facet name="footer">
										<p:row>
											<p:column>
												<p:commandButton value="Price" styleClass="rounded-button"
													action="#{pricingView.price(gCRepoTradeView.gcRepoTrade)}"
													update="@form">
												</p:commandButton>
											</p:column>
											<p:column>
												<p:outputLabel rendered="true" id="priceResult"
													value="#{pricingView.pricerResult}" class="label" />
											</p:column>
										</p:row>
									</f:facet>
								</p:panelGrid>
							</p:panel>
						</p:column>
						<p:column>
							<p:panel>
								<p:tabView id="quotesCashflowsTabs">
									<p:tab title="Quotes">
										<p:dataTable id="quotesListDataTable" var="quote"
											value="#{quotesView.quoteValues}" allowUnsorting="true"
											sortMode="single" tableStyle="table-layout: auto;"
											size="small">
											<f:facet name="header">
												<p:row>
													<p:column>
														<p:outputLabel value="Quote Date : " class="label" />
													</p:column>
													<p:column>
														<p:datePicker value="#{quotesView.quoteDate}"
															pattern="dd/MM/yyyy" styleClass="TradistaInput"
															style="margin-left:10px">
															<p:ajax event="dateSelect"
																listener="#{quotesView.refresh(quotesView.quoteDate, quotesView.quoteSet, gCRepoTradeView.quoteNames)}"
																update=":dashboardForm:quotesCashflowsTabs:quotesListDataTable" />
														</p:datePicker>
													</p:column>
													<p:column>
														<p:outputLabel value="Quote Set : " class="label"
															style="margin-left:10px" />
													</p:column>
													<p:column>
														<p:selectOneMenu value="#{quotesView.quoteSet}"
															styleClass="TradistaOneMenu"
															style="margin-left:10px;margin-right: 10px">
															<f:selectItems value="#{quotesView.allQuoteSets}" />
															<f:converter converterId="quoteSetConverter" />
															<p:ajax event="change"
																listener="#{quotesView.refresh(quotesView.quoteDate, quotesView.quoteSet, gCRepoTradeView.quoteNames)}"
																update=":dashboardForm:quotesCashflowsTabs:quotesListDataTable" />
														</p:selectOneMenu>
													</p:column>
													<p:column>
														<p:selectBooleanCheckbox value="#{quotesView.realTime}"
															style="margin-left:10px">Real Time
												<p:ajax event="change" update=":dashboardForm:poll" />
														</p:selectBooleanCheckbox>
													</p:column>
												</p:row>
											</f:facet>
											<p:column headerText="Name" sortBy="#{quote.quote.name}">
												<p:outputLabel value="#{quote.quote.name}" />
											</p:column>
											<p:column headerText="Date" sortBy="#{quote.date}">
												<p:outputLabel value="#{quote.date}" />
											</p:column>
											<p:column headerText="Type" sortBy="#{quote.quote.type}">
												<p:outputLabel value="#{quote.quote.type}" />
											</p:column>
											<p:column headerText="Bid" sortBy="#{quote.bid}">
												<p:outputLabel value="#{quote.bid}">
													<f:convertNumber maxFractionDigits="5" />
												</p:outputLabel>
											</p:column>
											<p:column headerText="Ask" sortBy="#{quote.ask}">
												<p:outputLabel value="#{quote.ask}">
													<f:convertNumber maxFractionDigits="5" />
												</p:outputLabel>
											</p:column>
											<p:column headerText="Open" sortBy="#{quote.open}">
												<p:outputLabel value="#{quote.open}">
													<f:convertNumber maxFractionDigits="5" />
												</p:outputLabel>
											</p:column>
											<p:column headerText="Close" sortBy="#{quote.close}">
												<p:outputLabel value="#{quote.close}">
													<f:convertNumber maxFractionDigits="5" />
												</p:outputLabel>
											</p:column>
											<p:column headerText="High" sortBy="#{quote.high}">
												<p:outputLabel value="#{quote.high}">
													<f:convertNumber maxFractionDigits="5" />
												</p:outputLabel>
											</p:column>
											<p:column headerText="Low" sortBy="#{quote.low}">
												<p:outputLabel value="#{quote.low}">
													<f:convertNumber maxFractionDigits="5" />
												</p:outputLabel>
											</p:column>
											<p:column headerText="Last" sortBy="#{quote.last}">
												<p:outputLabel value="#{quote.last}">
													<f:convertNumber maxFractionDigits="5" />
												</p:outputLabel>
											</p:column>
											<p:column headerText="Entered Date"
												sortBy="#{quote.enteredDate}">
												<p:outputLabel value="#{quote.enteredDate}" />
											</p:column>
											<p:column headerText="Source Name"
												sortBy="#{quote.sourceName}">
												<p:outputLabel value="#{quote.sourceName}" />
											</p:column>
										</p:dataTable>
									</p:tab>
									<p:tab title="Cashflows forecast">

										<p:dataTable id="cashflowsListDataTable" var="cf"
											value="#{cashflowsView.cashflows}" allowUnsorting="true"
											sortMode="single" tableStyle="table-layout: auto;"
											size="small">
											<f:facet name="header">
												<p:row>
													<p:column>
														<p:commandButton value="Generate"
															styleClass="rounded-button"
															update=":dashboardForm:quotesCashflowsTabs:cashflowsListDataTable">
															<f:actionListener
																binding="#{cashflowsView.generate(gCRepoTradeView.gcRepoTrade, pricingView.pricingParameter, pricingView.pricingDate)}" />
														</p:commandButton>
													</p:column>
													<p:column>
														<p:outputLabel value="Pricing Date" class="label"
															style="margin-left:10px" />
													</p:column>
													<p:column>
														<p:outputLabel value="#{pricingView.pricingDate}"
															class="label" style="margin-left:10px">
															<f:convertDateTime type="localDate" pattern="dd/MM/yyyy" />
														</p:outputLabel>
													</p:column>
													<p:column>
														<p:outputLabel value="Discount curve" class="label"
															style="margin-left:10px" />
													</p:column>
													<p:column>
														<p:outputLabel value="#{cashflowsView.discountCurve}"
															class="label" style="margin-left:10px"
															rendered="#{not (cashflowsView.discountCurve eq null)}" />
														<p:outputLabel
															value="#{cashflowsView.discountCurveWarning(pricingView.pricingParameter, gCRepoTradeView.currency)}"
															style="font-weight: bold;font-style: italic;margin-left: 10px;color: orange"
															rendered="#{cashflowsView.discountCurve eq null}" />
													</p:column>
												</p:row>
											</f:facet>
											<p:column headerText="Date" sortBy="#{cf.date}">
												<p:outputLabel value="#{cf.date}" />
											</p:column>
											<p:column headerText="Direction" sortBy="#{cf.direction}">
												<p:outputLabel value="#{cf.direction}" />
											</p:column>
											<p:column headerText="Purpose" sortBy="#{cf.purpose}">
												<p:outputLabel value="#{cf.purpose}" />
											</p:column>
											<p:column headerText="Amount" sortBy="#{cf.amount}">
												<p:outputLabel value="#{cf.amount}">
													<f:convertNumber maxFractionDigits="5" />
												</p:outputLabel>
											</p:column>
											<p:column headerText="Discounted Amount"
												sortBy="#{cf.discountedAmount}">
												<p:outputLabel value="#{cf.discountedAmount}">
													<f:convertNumber maxFractionDigits="5" />
												</p:outputLabel>
											</p:column>
											<p:column headerText="Discounted Factor"
												sortBy="#{cf.discountedFactor}">
												<p:outputLabel value="#{cf.discountedFactor}">
													<f:convertNumber maxFractionDigits="5" />
												</p:outputLabel>
											</p:column>
											<p:column headerText="Currency" sortBy="#{cf.currency}">
												<p:outputLabel value="#{cf.currency}" />
											</p:column>
										</p:dataTable>
									</p:tab>
								</p:tabView>
							</p:panel>
						</p:column>
					</p:row>
				</p:panelGrid>
				<p:dialog header="Add collateral" widgetVar="addCol" id="addCol"
					modal="true" closable="false">
					<p:panelGrid styleClass="nested">
						<p:row>
							<p:column>
								<p:outputLabel>
  Please indicate how much   
  <h:outputText value="#{collateralView.securityToAdd}" />
to add (up to 
<h:outputText value="#{collateralView.maxQuantityToAdd}">
										<f:convertNumber pattern="0.00" />
									</h:outputText>)				
</p:outputLabel>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:inputText value="#{collateralView.quantityToAdd}"
									styleClass="TradistaInput" />
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<p:commandButton value="Confirm" styleClass="rounded-button"
									update="@form"
									action="#{collateralView.updateCollateralToAdd(collateralView.quantityToAdd)}"
									oncomplete="PF('addCol').hide();" />
								<p:commandButton value="Cancel" styleClass="rounded-button"
									action="#{collateralView.clearCollateralToAdd()}"
									oncomplete="PF('addCol').hide();" style="margin-left:10px" />
							</p:column>
						</p:row>
					</p:panelGrid>
				</p:dialog>
				<p:poll interval="#{quotesView.frequency}" id="poll"
					stop="#{not quotesView.realTime}"
					listener="#{quotesView.refresh(quotesView.quoteDate, quotesView.quoteSet, gCRepoTradeView.quoteNames)}"
					update=":dashboardForm:quotesCashflowsTabs:quotesListDataTable" />
			</h:form>
		</div>
	</ui:define>
</ui:composition>